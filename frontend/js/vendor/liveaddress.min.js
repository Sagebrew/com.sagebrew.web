(function(f,i,q){var v;var p=new j;var d="2.8.22";var m={candidates:3,autocomplete:10,requestUrl:"https://api.smartystreets.com/street-address",timeout:5000,speed:"medium",ambiguousMessage:"Choose the correct address",invalidMessage:"Address not verified",missingSecondaryMessage:"Missing secondary number <br>(e.g., apartment number)",certifyMessage:"Click here to certify the address is correct",fieldSelector:"input[type=text], input:not([type]), textarea, select",submitSelector:"[type=submit], [type=image], [type=button]:last, button:last"};var y={};var c=[];var z="body";var C=0;var e=["street","street2","secondary","city","state","zipcode","lastline","addressee","urbanization","country"];f.LiveAddress=function(D){return f(z).LiveAddress(D)};f.fn.LiveAddress=function(E){var D=this,F=D.prevObject?!!D.prevObject.prevObject:false;var G=f.fn.jquery.split(".");if(G.length>=2){if(G[0]<1||(G[0]==1&&G[1]<5)){console.log("jQuery version "+f.fn.jquery+" found, but LiveAddress requires jQuery version 1.5 or higher. Aborting.");return false}}else{return false}if(E.debug){console.log("LiveAddress API jQuery Plugin version "+d+" (Debug mode)")}if(q.readyState==="complete"){i.loaded=true}else{f(i).load(function(){i.loaded=true})}if(typeof E==="string"){y={key:E}}else{if(typeof E==="object"){y=E}}y.candidates=y.candidates||m.candidates;y.ui=typeof y.ui==="undefined"?true:y.ui;y.autoMap=typeof y.autoMap==="undefined"?true:y.autoMap;y.autoVerify=y.autoVerify!==true&&y.autoVerify!==false?true:y.autoVerify;y.submitVerify=typeof y.submitVerify==="undefined"?true:y.submitVerify;y.timeout=y.timeout||m.timeout;y.ambiguousMessage=y.ambiguousMessage||m.ambiguousMessage;y.invalidMessage=y.invalidMessage||m.invalidMessage;y.missingSecondaryMessage=y.missingSecondaryMessage||m.missingSecondaryMessage;y.certifyMessage=y.certifyMessage||m.certifyMessage;y.fieldSelector=y.fieldSelector||m.fieldSelector;y.submitSelector=y.submitSelector||m.submitSelector;y.requestUrl=y.requestUrl||m.requestUrl;y.autocomplete=typeof y.autocomplete==="undefined"?m.autocomplete:y.autocomplete;y.cityFilter=typeof y.cityFilter==="undefined"?"":y.cityFilter;y.stateFilter=typeof y.stateFilter==="undefined"?"":y.stateFilter;y.cityStatePreference=typeof y.cityStatePreference==="undefined"?"":y.cityStatePreference;y.geolocate=typeof y.geolocate==="undefined"?true:y.geolocate;y.geolocatePrecision=typeof y.geolocatePrecision==="undefined"?"city":y.geolocatePrecision;y.waitForStreet=typeof y.waitForStreet==="undefined"?false:y.waitForStreet;y.verifySecondary=typeof y.verifySecondary==="undefined"?false:y.verifySecondary;y.enforceVerification=typeof y.enforceVerification==="undefined"?false:y.enforceVerification;y.candidates=y.candidates<1?0:(y.candidates>10?10:y.candidates);y.xIncludeInvalid=typeof y.xIncludeInvalid==="undefined"?false:y.xIncludeInvalid;if(typeof y.autocomplete==="number"){y.autocomplete=y.autocomplete<1?false:(y.autocomplete>10?10:y.autocomplete)}v={events:x,on:function(J,I){if(!x[J]||typeof I!=="function"){return false}var K=x[J];x[J]=function(L,M){I(L,M,K)}},mapFields:function(J){var I=function(K){if(K==="auto"){return p.automap(D)}else{if(typeof K==="object"){return p.mapFields(K,D)}else{if(!K&&typeof y.addresses==="object"){return p.mapFields(y.addresses,D)}else{if(y.autoMap){return p.automap(D)}else{return false}}}}};if(f.isReady){I(J)}else{f(function(){if(!F){D=f(D.selector)}I(J)})}},makeAddress:function(I){if(typeof I!=="object"){return v.getMappedAddressByID(I)||new t({street:I})}else{return new t(I)}},verify:function(I,K){var J=v.makeAddress(I);o("VerificationInvoked",{address:J,verifyAccepted:true,invoke:K})},getMappedAddresses:function(){var K=[];for(var J=0;J<c.length;J++){for(var I=0;I<c[J].addresses.length;I++){K.push(c[J].addresses[I])}}return K},getMappedAddressByID:function(I){for(var K=0;K<c.length;K++){for(var J=0;J<c[K].addresses.length;J++){if(c[K].addresses[J].id()==I){return c[K].addresses[J]}}}},setKey:function(I){y.key=I},setCityFilter:function(I){y.cityFilter=I},setStateFilter:function(I){y.stateFilter=I},setCityStatePreference:function(I){y.cityStatePreference=I},activate:function(I){var J=v.getMappedAddressByID(I);if(J){J.active=true;p.showSmartyUI()}},deactivate:function(I){if(!I){return p.clean()}var J=v.getMappedAddressByID(I);if(J){J.active=false;p.hideSmartyUI(I)}},autoVerify:function(K){if(typeof K==="undefined"){return y.autoVerify}else{if(K===false){y.autoVerify=false}else{if(K===true){y.autoVerify=true}}}for(var J=0;J<c.length;J++){for(var I=0;I<c[J].addresses.length;I++){c[J].addresses[I].verifyCount=0}}},version:d};for(var H in x){f(q).unbind(H,a);B(H)}v.mapFields();return v};function j(){var P;var L={formDataProperty:"smarty-form",identifiers:{streets:{names:["street","address","address1","address2","addr1","addr2","address-1","address-2","address_1","address_2","line","primary"],labels:["street","address","line "," line"]},secondary:{names:["suite","apartment","primary","pmb","secondary"],labels:["suite","apartment","apt:","apt.","ste:","ste.","unit:","unit.","unit ","box","pmb"]},city:{names:["city","town","village","cityname","city-name","city_name","cities"],labels:["city","town","city name"]},state:{names:["state","province","region","section","territory"],labels:["state","province","region","section","territory"]},zipcode:{names:["zip","zipcode","zip-code","zip_code","postal_code","postal-code","postalcode","postcode","post-code","post_code","postal","zcode"],labels:["zip","zip code","postal code","postcode","locality"]},lastline:{names:["lastline","last-line","citystatezip","city-state-zip","city_state_zip"],labels:["last line","city/state/zip","city / state / zip","city - state - zip","city-state-zip","city, state, zip"]},country:{names:["country","nation","sovereignty"],labels:["country","nation","sovereignty"]}},street1exacts:{names:["address","street","address1","streetaddress","street-address","street_address","streetaddr","street-addr","street_addr","str","str1","street1","addr"]},street2:{names:["address2","address_2","address-2","street2","addr2","addr_2","line2","str2","second","two"],labels:[" 2","second ","two"]},exclude:{names:["email","e-mail","e_mail","firstname","first-name","first_name","lastname","last-name","last_name","fname","lname","name","eml","type","township","zip4","plus4","method","location","store","save","keep","phn","phone","cardholder","security","comp","firm","org","addressee","addresses","group","gate","fax","cvc","cvv","file","search","list"],labels:["email","e-mail","e mail"," type","save ","keep","name","method","phone","organization","company","addressee","township","firm","group","gate","cardholder","cvc","cvv","search","file"," list","fax","book"]}};var R;var O=0;var J=[];var E=24,I=8;var T="<style>.smarty-dots { display: none; position: absolute; z-index: 999; width: "+E+"px; height: "+I+"px; background-image: url('data:image/gif;base64,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'); }.smarty-ui { position: absolute; z-index: 99999; text-shadow: none; text-align: left; text-decoration: none; }.smarty-popup { border: 3px solid #4C4C4C; padding: 0; background: #F6F6F6; box-shadow: 0px 10px 35px rgba(0, 0, 0, .8); }.smarty-popup-header { background: #DDD; height: 12px; text-transform: uppercase; font: bold 12px/1em 'Arial Black', sans-serif; padding: 12px; }.smarty-popup-ambiguous-header { color: #333; }.smarty-popup-invalid-header { color: #CC0000; }.smarty-popup-close { color: #CC0000 !important; text-decoration: none !important; position: absolute; right: 15px; top: 10px; display: block; padding: 4px 6px; text-transform: uppercase; }.smarty-popup-close:hover { color: #FFF !important; background: #CC0000; }.smarty-choice-list .smarty-choice { background: #FFF; padding: 10px 15px; color: #1A1A1A; }.smarty-choice { display: block; font: 300 14px/1.5em sans-serif; text-decoration: none !important; border-top: 1px solid #CCC; }.smarty-choice-list .smarty-choice:hover { color: #EEE !important; background: #333; text-decoration: none !important; }.smarty-choice-alt { border-top: 1px solid #4C4C4C; background: #F6F6F6 !important; box-shadow: inset 0 4px 15px -5px rgba(0, 0, 0, .45); }.smarty-choice-alt .smarty-choice-abort, .smarty-choice-override { padding: 6px 15px; color: #B3B3B3 !important; font-size: 12px; text-decoration: none !important; }.smarty-choice-alt .smarty-choice:first-child { border-top: 0; }.smarty-choice-abort:hover { color: #333 !important; }.smarty-choice-override:hover { color: #CC0000 !important; }.smarty-tag { position: absolute; display: block; overflow: hidden; font: 15px/1.2em sans-serif; text-decoration: none !important; width: 20px; height: 18px; border-radius: 25px; transition: all .25s; -moz-transition: all .25s; -webkit-transition: all .25s; -o-transition: all .25s; }.smarty-tag:hover { width: 70px; text-decoration: none !important; color: #999; }.smarty-tag:hover .smarty-tag-text { color: #000 !important; }.smarty-tag-grayed { border: 1px solid #B4B4B4 !important; color: #999 !important; background: #DDD !important; box-shadow: inset 0 9px 15px #FFF; }.smarty-tag-green { border: 1px solid #407513 !important; color: #407513 !important; background: #A6D187 !important; box-shadow: inset 0 9px 15px #E3F6D5; }.smarty-tag-grayed:hover { border-color: #333 !important; }.smarty-tag-check { padding-left: 4px; text-decoration: none !important; }.smarty-tag-text { font-size: 12px !important; position: absolute; top: 0; left: 16px; width: 50px !important; text-align: center !important; }.smarty-autocomplete { border: 1px solid #777; background: white; overflow: hidden; white-space: nowrap; box-shadow: 1px 1px 3px #555; }.smarty-suggestion { display: block; color: #444; text-decoration: none !important; font-size: 12px; padding: 1px 5px; }.smarty-active-suggestion { background: #EEE; color: #000; border: none; outline: none; }.smarty-no-suggestions { padding: 1px 5px; font-size: 12px; color: #AAA; font-style: italic; }</style>";this.postMappingOperations=function(){if(y.ui){f("head").prepend(T);var Y=v.getMappedAddresses();for(var ab=0;ab<Y.length;ab++){var W=Y[ab].id();f("body").append('<div class="smarty-ui"><div title="Loading..." class="smarty-dots smarty-addr-'+W+'"></div></div>');var Z=S(Y[ab].corners(true));f("body").append('<div class="smarty-ui" style="top: '+Z.top+"px; left: "+Z.left+'px;"><a href="javascript:" class="smarty-tag smarty-tag-grayed smarty-addr-'+W+'" title="Address not verified. Click to verify." data-addressid="'+W+'"><span class="smarty-tag-check">&#10003;</span><span class="smarty-tag-text">Verify</span></a></div>');f(i).resize({addr:Y[ab]},function(ak){var an=ak.data.addr;var am=S(an.corners(true));f(".smarty-tag.smarty-addr-"+an.id()).parent(".smarty-ui").css("top",am.top+"px").css("left",am.left+"px");var ai=an.corners();f(".smarty-popup.smarty-addr-"+an.id()).parent(".smarty-ui").css("top",ai.top+"px").css("left",ai.left+"px");if(y.autocomplete){var al=f(".smarty-autocomplete.smarty-addr-"+an.id()).closest(".smarty-ui");var aj=an.getDomFields();if(aj.street){al.css({left:f(aj.street).offset().left+"px",top:(f(aj.street).offset().top+f(aj.street).outerHeight(false))+"px"})}}});if(!Y[ab].isDomestic()){var ad=f(".smarty-ui .smarty-tag.smarty-addr-"+W);if(ad.is(":visible")){ad.hide()}Y[ab].accept({address:Y[ab]},false)}}f("body").delegate(".smarty-tag-grayed","click",function(aj){var ai=f(this).data("addressid");v.verify(ai)});f("body").delegate(".smarty-undo","click",function(aj){var ai=f(this).parent().data("addressid");var ak=v.getMappedAddressByID(ai);ak.undo(true)});if(y.autocomplete&&y.key){for(var ab=0;ab<c.length;ab++){var ae=c[ab];for(var aa=0;aa<ae.addresses.length;aa++){var af=ae.addresses[aa];var ah=af.getDomFields();if(ah.street){var ag=f(ah.street);var V=f('<div class="smarty-ui"></div>');var X=f('<div class="smarty-autocomplete"></div>');X.addClass("smarty-addr-"+af.id());V.data("addrID",af.id());V.append(X);V.css({position:"absolute",left:ag.offset().left+"px",top:(ag.offset().top+ag.outerHeight(false))+"px"});V.hide().appendTo("body");V.delegate(".smarty-suggestion","click",{addr:af,containerUi:V},function(aj){var ai=R.suggestions[f(this).data("suggIndex")];K(aj.data.addr,ai,aj.data.containerUi)});V.delegate(".smarty-suggestion","mouseover",function(){f(".smarty-active-suggestion").removeClass("smarty-active-suggestion");f(this).addClass("smarty-active-suggestion")});V.delegate(".smarty-active-suggestion","mouseleave",function(){f(this).removeClass("smarty-active-suggestion")});ag.attr("autocomplete","off");ag.blur({containerUi:V},function(ai){setTimeout((function(aj){return function(){if(aj.data){aj.data.containerUi.hide()}}})(ai),300)});ag.keydown({containerUi:V,addr:af},function(al){var aj=f(".smarty-autocomplete",al.data.containerUi);var ai=f(".smarty-active-suggestion:visible",aj).first();var ak=false;if(al.keyCode==9){if(ai.length>0){var am=al.data.addr.getDomFields();if(am.zipcode){f(am.zipcode).focus()}else{f(am.street).blur()}K(al.data.addr,R.suggestions[ai.data("suggIndex")],al.data.containerUi);return af.isFreeform()?true:s(al)}else{al.data.containerUi.hide()}}else{if(al.keyCode==40){if(!ai.hasClass("smarty-suggestion")){ai=f(".smarty-suggestion",aj).first().mouseover();ak=true}if(!ak){if(ai.next(".smarty-addr-"+al.data.addr.id()+" .smarty-suggestion").length>0){ai.next(".smarty-suggestion").mouseover()}else{ai.removeClass("smarty-active-suggestion")}}F(this)}else{if(al.keyCode==38){if(!ai.hasClass("smarty-suggestion")){ai=f(".smarty-suggestion",aj).last().mouseover();ak=true}if(!ak){if(ai.prev(".smarty-addr-"+al.data.addr.id()+" .smarty-suggestion").length>0){ai.prev(".smarty-suggestion").mouseover()}else{ai.removeClass("smarty-active-suggestion")}}F(this)}}}});ag.keyup({form:ae,addr:af,streetField:ag,containerUi:V},Q)}}f(q).keyup(function(ai){if(ai.keyCode==27){f(".smarty-autocomplete").closest(".smarty-ui").hide()}})}setTimeout(function(){f(i).resize()},500);setTimeout(function(){f(i).resize()},1500)}}if(y.submitVerify){for(var ab=0;ab<c.length;ab++){var ae=c[ab];P=function(aj){if((aj.data.form&&aj.data.form.processing)||f(".smarty-active-suggestion:visible").length>0){return s(aj)}if(!aj.data.form.allActiveAddressesAccepted()){var ai=aj.data.form.activeAddressesNotAccepted();if(ai.length>0){o("VerificationInvoked",{address:ai[0],invoke:aj.data.invoke,invokeFn:aj.data.invokeFn})}return s(aj)}};var U=function(an,ak){if(!an||!ak){return}var am=[],ai=f._data(an,"events");if(ai&&ai[ak]&&ai[ak].length>0){am=f.extend(true,[],ai[ak])}f(an).unbind(ak);f(an)[ak]({form:ae,invoke:an,invokeFn:ak},P);if(typeof an["on"+ak]==="function"){var aj=an["on"+ak];an["on"+ak]=null;f(an)[ak](aj)}for(var al=0;al<am.length;al++){f(an)[ak](am[al].data,am[al].handler)}};var ac=f(y.submitSelector,ae.dom);if(y.debug){for(var aa=0;aa<ac.length;aa++){ac[aa].style.color="#4BA341"}}ac.each(function(ai){U(this,"click")})}}o("MapInitialized")};function Q(W){var Z=W.data.addr;var X=W.data.streetField;var V=f.trim(W.data.streetField.val());var Y=W.data.containerUi;var U=f(".smarty-autocomplete",Y);if(!V){Z.lastStreetInput=V;U.empty();Y.hide()}if(W.keyCode==13){if(f(".smarty-active-suggestion:visible").length>0){K(Z,R.suggestions[f(".smarty-active-suggestion:visible").first().data("suggIndex")],Y)}Y.hide();X.blur();return s(W)}if(W.keyCode==40){F(X[0]);return}if(W.keyCode==38){F(X[0]);return}if(!V||V==Z.lastStreetInput||!Z.isDomestic()){return}Z.lastStreetInput=V;o("AutocompleteInvoked",{containerUi:Y,suggContainer:U,streetField:X,input:V,addr:Z})}this.requestAutocomplete=function(U,V){if(V.input&&V.addr.isDomestic()&&R){V.containerUi.show()}var W={callback:function(X,Z){var ac=new RegExp("^\\w+\\s\\w+|^[A-Za-z]+$|^[A-Za-z]+\\s\\w*");var ae=ac.test(V.input);R=Z;V.suggContainer.empty();if(!Z.suggestions||Z.suggestions.length==0){V.suggContainer.html('<div class="smarty-no-suggestions">No suggestions</div>');return}if(y.waitForStreet&&ae==false){var ab="";if(y.stateFilter||y.cityFilter||y.geolocate||y.cityStatePreference){ab="filtered"}else{ab="address"}V.suggContainer.html('<div class="smarty-no-suggestions">Type more for '+ab+" suggestions</div>")}else{for(var Y=0;Y<Z.suggestions.length;Y++){var ad=Z.suggestions[Y].text.replace(/<|>/g,"");ad=ad.replace(new RegExp("("+V.input+")","ig"),"<b>$1</b>");var aa=f('<a href="javascript:" class="smarty-suggestion">'+ad+"</a>");aa.data("suggIndex",Y);V.suggContainer.append(aa)}}V.suggContainer.css({width:Math.max(V.streetField.outerWidth(false),250)+"px"});V.containerUi.show();J.splice(0,X)},number:O++};J[W.number]=W;f.getJSON("https://autocomplete-api.smartystreets.com/suggest?callback=?",{"auth-id":y.key,"auth-token":y.token,prefix:V.input,city_filter:y.cityFilter,state_filter:y.stateFilter,prefer:y.cityStatePreference,suggestions:y.autocomplete,geolocate:y.geolocate,geolocate_precision:y.geolocatePrecision},function(X){o("AutocompleteReceived",f.extend(V,{json:X,autocplrequest:W}))})};this.showAutocomplete=function(U,V){if(J[V.autocplrequest.number]){J[V.autocplrequest.number].callback(V.autocplrequest.number,V.json)}};function K(Y,V,X){var U=Y.getDomFields();X.hide();if(Y.isFreeform()){f(U.street).val(V.text).change()}else{if(U.zipcode){f(U.zipcode).val("").change()}if(U.street){f(U.street).val(V.street_line).change()}if(U.state){if(U.state.options){for(var W=0;W<U.state.options.length;W++){if(U.state.options[W].text.toUpperCase()===V.state||k[U.state.options[W].text.toUpperCase()]===V.state){f(U.state)[0].selectedIndex=W;f(U.state).change();break}}}else{f(U.state).val(V.state).change()}}if(U.city){f(U.city).val("").change();Y.usedAutocomplete=true;f(U.city).val(V.city).change()}if(U.lastline){Y.usedAutocomplete=true}f(U.lastline).val(V.city+" "+V.state).change()}o("AutocompleteUsed",{address:Y,suggestion:V})}function S(U){return{top:U.top+U.height/2-10,left:U.right-6}}function N(Y,ac,Z){var U=g(Y.name);var V=g(Y.id);var aa=V.replace(/[\[|\]|\(|\)|\:|\'|\"|\=|\||\#|\.|\!|\||\@|\^|\&|\*]/g,"\\\\$&");var ae=g(Y.placeholder);var ad=g(Y.title);for(var X=0;X<ac.length;X++){if(U.indexOf(ac[X])>-1||V.indexOf(ac[X])>-1){return true}}if(!("labels" in Y)){var ab=f('label[for="'+aa+'"]')[0]||f(Y).parents("label")[0];Y.labels=!ab?[]:[ab]}for(var X=0;X<Y.labels.length;X++){for(var W=0;W<Z.length;W++){if(f(Y.labels[X]).text().toLowerCase().indexOf(Z[W])>-1){return true}}}for(var X=0;X<Z.length;X++){if(ae.indexOf(Z[X])>-1||ad.indexOf(Z[X])>-1){return true}}return false}function M(U,V){f(q).unbind("keyup");f(U).slideUp(m.speed,function(){f(this).parent(".smarty-ui").remove()});o("Completed",V.data)}function G(V){if(Array.isArray(V)||typeof V=="object"){for(var U in V){f("body").undelegate(V[U],"click")}}else{if(typeof V==="string"){f("body").undelegate(V,"click")}else{alert("ERROR: Not an array, string, or object passed in to undelegate all clicks")}}}function F(V){if(typeof V.selectionStart=="number"){V.selectionStart=V.selectionEnd=V.value.length}else{if(typeof V.createTextRange!="undefined"){V.focus();var U=V.createTextRange();U.collapse(false);U.select()}}}this.showSmartyUI=function(){var U=f(".deactivated");U.removeClass("deactivated");U.addClass("activated");U.show()};this.hideSmartyUI=function(U){var V=f(".smarty-addr-"+U+":visible");var W=f(".smarty-autocomplete.smarty-addr-"+U);V.addClass("deactivated");V.parent().addClass("deactivated");W.addClass("deactivated");V.hide();V.parent().hide();W.hide()};this.clean=function(){if(c.length==0){return}if(y.debug){console.log("Cleaning up old form map data and bindings...")}for(var W=0;W<c.length;W++){f(c[W].dom).data(L.formDataProperty,"");for(var V=0;V<c[W].addresses.length;V++){var Y=c[W].addresses[V].getDomFields();for(var Z in Y){if(y.debug){f(Y[Z]).css("background","none").attr("placeholder","");var X=f(y.submitSelector);for(var U=0;U<X.length;U++){X[U].style.color="black"}}f(Y[Z]).unbind("change")}if(Y.street){f(Y.street).unbind("keyup").unbind("keydown").unbind("blur")}}f.each(c,function(aa){f(this.dom).unbind("submit",P)});f(y.submitSelector,c[W].dom).each(function(aa){f(this).unbind("click",P)})}f(".smarty-ui").undelegate(".smarty-suggestion","click").undelegate(".smarty-suggestion","mouseover").undelegate(".smarty-suggestion","mouseleave").remove();f("body").undelegate(".smarty-undo","click");f("body").undelegate(".smarty-tag-grayed","click");f(i).unbind("resize");f(q).unbind("keyup");c=[];C=0;if(y.debug){console.log("Done cleaning up; ready for new mapping.")}};function D(V){if(y.autocomplete>0){for(var U=0;U<V.getElementsByTagName("input").length;U++){V.getElementsByTagName("input")[U].autocomplete="smartystreets"}}}function H(V){if(V.getElementsByTagName("option").length>0){if(u(n,V.getElementsByTagName("option")[0].text.toUpperCase())||u(r,V.getElementsByTagName("option")[0].text.toUpperCase())){var U=q.createElement("OPTION");U.innerText="State";U.selected=true;f(V.getElementsByTagName("select")[0]).prepend(U);f(V).change()}}}this.automap=function(U){if(y.debug){console.log("Automapping fields...")}this.clean();f("form").each(function(ag){var X=new h(this);var W={};for(var ah in L.identifiers){var ae=L.identifiers[ah].names;var ac=L.identifiers[ah].labels;W[ah]=f(y.fieldSelector,this).filter(function(){return f(U).has(this).length>0}).filter(":visible").filter(function(){var ai=g(this.name),am=g(this.id);if(ah=="streets"){for(var ak=0;ak<L.street1exacts.names.length;ak++){if(ai==L.street1exacts.names[ak]||am==L.street1exacts.names[ak]){return true}}}var aj=N(this,ae,ac);if(ah=="streets"){var al=["secondary","city","state","zipcode","country","lastline"];for(var ak=0;ak<al.length;ak++){if(N(this,L.identifiers[al[ak]].names,L.identifiers[al[ak]].labels)){return false}}}return aj}).not(function(){var ai=g(this.name),aj=g(this.id);if(ai=="name"||aj=="name"){return true}return N(this,L.exclude.names,L.exclude.labels)}).toArray()}W.street=[];W.street2=[];if(W.streets.length<=W.city.length*1.5||W.streets.length<=W.zipcode.length*1.5){W.street=W.streets}else{for(var ab=0;ab<W.streets.length;ab++){var ad=W.streets[ab];if(N(ad,L.street2.names,L.street2.labels)||(ab>0&&ad.name==W.streets[ab-1].name)){W.street2.push(ad)}else{W.street.push(ad)}}}delete W.streets;if(y.debug){console.log("For form "+ag+", the initial scan found these fields:",W)}var V=Math.max(W.street.length,W.street2.length);if(y.debug&&V==0){console.log("No addresses were found in form "+ag+".")}for(var ab=0;ab<V;ab++){var aa={};for(var af in W){var ad=W[af][ab];if(ad){aa[af]=ad}}var Z=aa.zipcode||(aa.state&&aa.city);var Y=aa.city||aa.state||aa.zipcode;if((!aa.street&&Z)||(aa.street&&!Z&&Y)){if(y.debug){console.log("Form "+ag+" contains some address input elements that could not be resolved to a complete address.")}continue}X.addresses.push(new t(aa,X,"auto"+(++C)))}D(X.dom);H(X.dom);c.push(X);if(y.debug){console.log("Form "+ag+" is finished:",X)}});if(y.debug){console.log("Automapping complete.")}o("FieldsMapped")};this.mapFields=function(U,W){if(y.debug){console.log("Manually mapping fields given this data:",U)}this.clean();var ab=[];U=U instanceof Array?U:[U];for(var ac in U){var ad=U[ac];if(!ad.street){continue}for(var aa in ad){if(aa!="id"){if(!u(e,aa)){if(y.debug){console.log("NOTICE: Field named "+aa+" is not allowed. Skipping...")}delete ad[aa];continue}var X=f(ad[aa],W);if(X.length==0){if(y.debug){console.log("NOTICE: No matches found for selector "+ad[aa]+". Skipping...")}delete ad[aa]}else{if(X.parents("form").length==0){if(y.debug){console.log('NOTICE: Element with selector "'+ad[aa]+'" is not inside a <form> tag. Skipping...')}delete ad[aa]}else{ad[aa]=X[0]}}}}if(!((ad.street)&&(((ad.city)&&(ad.state))||(ad.zipcode)||(ad.lastline)||(!ad.street2&&!ad.city&&!ad.state&&!ad.zipcode&&!ad.lastline)))){if(y.debug){console.log("NOTICE: Address map (index "+ac+") was not mapped to a complete street address. Skipping...")}continue}var Z=f(ad.street).parents("form")[0];var V=new h(Z);if(!f(Z).data(L.formDataProperty)){f(Z).data(L.formDataProperty,1);D(V.dom);H(V.dom);ab.push(V)}else{for(var Y=0;Y<ab.length;Y++){if(ab[Y].dom==Z){V=ab[Y];break}}}C++;V.addresses.push(new t(ad,V,ad.id));if(y.debug){console.log("Finished mapping address with ID: "+V.addresses[V.addresses.length-1].id())}}c=ab;o("FieldsMapped")};this.disableFields=function(V){if(!y.ui){return}var U=V.getDomFields();for(var X in U){f(U[X]).prop?f(U[X]).prop("disabled",true):f(U[X]).attr("disabled","disabled")}if(V.form&&V.form.dom){var W=f(y.submitSelector,V.form.dom);W.prop?W.prop("disabled",true):W.attr("disabled","disabled")}};this.enableFields=function(V){if(!y.ui){return}var U=V.getDomFields();for(var X in U){f(U[X]).prop?f(U[X]).prop("disabled",false):f(U[X]).removeAttr("disabled")}if(V.form&&V.form.dom){var W=f(y.submitSelector,V.form.dom);W.prop?W.prop("disabled",false):W.removeAttr("disabled")}};this.showLoader=function(W){if(!y.ui||!W.hasDomFields()){return}var U=W.corners(true);var V=f(".smarty-dots.smarty-addr-"+W.id()).parent();V.css("top",(U.top+U.height/2-I/2)+"px").css("left",(U.right-E-10)+"px");f(".smarty-dots",V).show()};this.hideLoader=function(U){if(y.ui){f(".smarty-dots.smarty-addr-"+U.id()).hide()}};this.markAsValid=function(V){if(!y.ui||!V){return}var U=f(".smarty-tag.smarty-tag-grayed.smarty-addr-"+V.id());U.removeClass("smarty-tag-grayed").addClass("smarty-tag-green").attr("title","Address verified! Click to undo.");f(".smarty-tag-text",U).text("Verified").hover(function(){f(this).text("Undo")},function(){f(this).text("Verified")}).addClass("smarty-undo")};this.unmarkAsValid=function(W){var V=".smarty-tag.smarty-addr-"+W.id();if(!y.ui||!W||f(V).length==0){return}var U=f(".smarty-tag.smarty-tag-green.smarty-addr-"+W.id());U.removeClass("smarty-tag-green").addClass("smarty-tag-grayed").attr("title","Address not verified. Click to verify.");f(".smarty-tag-text",U).text("Verify").unbind("mouseenter mouseleave").removeClass("smarty-undo")};this.showAmbiguous=function(X){if(!y.ui||!X.address.hasDomFields()){return}var ab=X.address;var V=X.response;var aa=ab.corners();aa.width=Math.max(aa.width,300);aa.height=Math.max(aa.height,V.length*63+119);if(y.enforceVerification){aa.height-=49}var Z='<div class="smarty-ui" style="top: '+aa.top+"px; left: "+aa.left+"px; width: "+aa.width+"px; height: "+aa.height+'px;"><div class="smarty-popup smarty-addr-'+ab.id()+'" style="width: '+(aa.width-6)+"px; height: "+(aa.height-3)+'px;"><div class="smarty-popup-header smarty-popup-ambiguous-header">'+y.ambiguousMessage+'<a href="javascript:" class="smarty-popup-close smarty-abort" title="Cancel">x</a></div><div class="smarty-choice-list">';for(var Y=0;Y<V.raw.length;Y++){var ac=V.raw[Y].delivery_line_1,W=V.raw[Y].components.city_name,ad=V.raw[Y].components.state_abbreviation,U=V.raw[Y].components.zipcode+"-"+V.raw[Y].components.plus4_code;Z+='<a href="javascript:" class="smarty-choice" data-index="'+Y+'">'+ac+"<br>"+W+", "+ad+" "+U+"</a>"}Z+='</div><div class="smarty-choice-alt">';Z+='<a href="javascript:" class="smarty-choice smarty-choice-abort smarty-abort">Click here to change your address</a>';if(!y.enforceVerification){Z+='<a href="javascript:" class="smarty-choice smarty-choice-override">'+y.certifyMessage+"<br>("+ab.toString()+")</a>"}Z+="</div></div></div>";f(Z).hide().appendTo("body").show(m.speed);if(f(q).scrollTop()>aa.top-100||f(q).scrollTop()<aa.top-f(i).height()+100){f("html, body").stop().animate({scrollTop:f(".smarty-popup.smarty-addr-"+ab.id()).offset().top-100},500)}X.selectors={goodAddr:".smarty-popup.smarty-addr-"+ab.id()+" .smarty-choice-list .smarty-choice",useOriginal:".smarty-popup.smarty-addr-"+ab.id()+" .smarty-choice-override",abort:".smarty-popup.smarty-addr-"+ab.id()+" .smarty-abort"};f("body").delegate(X.selectors.goodAddr,"click",X,function(ae){f(".smarty-popup.smarty-addr-"+ab.id()).slideUp(m.speed,function(){f(this).parent(".smarty-ui").remove();f(this).remove()});G(ae.data.selectors);delete ae.data.selectors;o("UsedSuggestedAddress",{address:ae.data.address,response:ae.data.response,invoke:ae.data.invoke,invokeFn:ae.data.invokeFn,chosenCandidate:V.raw[f(this).data("index")]})});f("body").delegate(X.selectors.useOriginal,"click",X,function(ae){f(this).parents(".smarty-popup").slideUp(m.speed,function(){f(this).parent(".smarty-ui").remove();f(this).remove()});G(ae.data.selectors);delete ae.data.selectors;o("OriginalInputSelected",ae.data)});f(q).keyup(X,function(ae){if(ae.keyCode==27){G(ae.data.selectors);delete ae.data.selectors;M(f(".smarty-popup.smarty-addr-"+ae.data.address.id()),ae);s(ae)}});f("body").delegate(X.selectors.abort,"click",X,function(ae){G(ae.data.selectors);delete ae.data.selectors;M(f(this).parents(".smarty-popup"),ae)})};this.showInvalid=function(X){if(!y.ui||!X.address.hasDomFields()){return}var Y=X.address;var V=X.response;var U=Y.corners();U.width=Math.max(U.width,300);U.height=Math.max(U.height,180);if(y.enforceVerification){U.height-=49}var W='<div class="smarty-ui" style="top: '+U.top+"px; left: "+U.left+"px; width: "+U.width+"px; height: "+U.height+'px;"><div class="smarty-popup smarty-addr-'+Y.id()+'" style="width: '+(U.width-6)+"px; height: "+(U.height-3)+'px;"><div class="smarty-popup-header smarty-popup-invalid-header">'+y.invalidMessage+'<a href="javascript:" class="smarty-popup-close smarty-abort" title="Cancel">x</a></div><div class="smarty-choice-list"><a href="javascript:" class="smarty-choice smarty-choice-abort smarty-abort">Click here to change your address</a></div><div class="smarty-choice-alt">';if(!y.enforceVerification){W+='<a href="javascript:" class="smarty-choice smarty-choice-override">'+y.certifyMessage+"<br>("+Y.toString()+")</a>"}W+="</div></div></div>";f(W).hide().appendTo("body").show(m.speed);X.selectors={useOriginal:".smarty-popup.smarty-addr-"+Y.id()+" .smarty-choice-override ",abort:".smarty-popup.smarty-addr-"+Y.id()+" .smarty-abort"};if(f(q).scrollTop()>U.top-100||f(q).scrollTop()<U.top-f(i).height()+100){f("html, body").stop().animate({scrollTop:f(".smarty-popup.smarty-addr-"+Y.id()).offset().top-100},500)}G(X.selectors.abort);f("body").delegate(X.selectors.abort,"click",X,function(Z){M(".smarty-popup.smarty-addr-"+Z.data.address.id(),Z);delete Z.data.selectors;o("InvalidAddressRejected",Z.data)});G(X.selectors.useOriginal);f("body").delegate(X.selectors.useOriginal,"click",X,function(Z){M(".smarty-popup.smarty-addr-"+Z.data.address.id(),Z);delete Z.data.selectors;o("OriginalInputSelected",Z.data)});f(q).keyup(X,function(Z){if(Z.keyCode==27){f(X.selectors.abort).click();G(Z.data.selectors);M(".smarty-popup.smarty-addr-"+Z.data.address.id(),Z)}})};this.showMissingSecondary=function(W){if(!y.ui||!W.address.hasDomFields()){return}var X=W.address;var U=X.corners();U.width=Math.max(U.width,300);U.height=Math.max(U.height,180);if(y.enforceVerification){U.height-=49}var V='<div class="smarty-ui" style="top: '+U.top+"px; left: "+U.left+"px; width: "+U.width+"px; height: "+U.height+'px;"><div class="smarty-popup smarty-addr-'+X.id()+'" style="width: '+(U.width-6)+"px; height: "+(U.height-3)+'px;"><div class="smarty-popup-header smarty-popup-missing-secondary-header">'+y.missingSecondaryMessage+'<a href="javascript:" class="smarty-popup-close smarty-abort" title="Cancel">x</a></div><div class="smarty-choice-list"><a href="javascript:" class="smarty-choice smarty-choice-abort smarty-abort">Click here to change your address</a></div><div class="smarty-choice-alt">';if(!y.enforceVerification){V+='<a href="javascript:" class="smarty-choice smarty-choice-override">'+y.certifyMessage+"<br>("+X.toString()+")</a>"}V+="</div></div></div>";f(V).hide().appendTo("body").show(m.speed);W.selectors={useOriginal:".smarty-popup.smarty-addr-"+X.id()+" .smarty-choice-override ",abort:".smarty-popup.smarty-addr-"+X.id()+" .smarty-abort"};if(f(q).scrollTop()>U.top-100||f(q).scrollTop()<U.top-f(i).height()+100){f("html, body").stop().animate({scrollTop:f(".smarty-popup.smarty-addr-"+X.id()).offset().top-100},500)}G(W.selectors.abort);f("body").delegate(W.selectors.abort,"click",W,function(Y){M(".smarty-popup.smarty-addr-"+Y.data.address.id(),Y);delete Y.data.selectors;o("InvalidAddressRejected",Y.data)});G(W.selectors.useOriginal);f("body").delegate(W.selectors.useOriginal,"click",W,function(Y){M(".smarty-popup.smarty-addr-"+Y.data.address.id(),Y);delete Y.data.selectors;o("OriginalInputSelected",Y.data)});f(q).keyup(W,function(Y){if(Y.keyCode==27){f(W.selectors.abort).click();G(Y.data.selectors);M(".smarty-popup.smarty-addr-"+Y.data.address.id(),Y)}})};this.isDropdown=function(U){return U&&((U.tagName||U.nodeName||"").toUpperCase()=="SELECT")}}var k={ALABAMA:"AL",ALASKA:"AK","AMERICAN SAMOA":"AS",ARIZONA:"AZ",ARKANSAS:"AR",CALIFORNIA:"CA",COLORADO:"CO",CONNECTICUT:"CT",DELAWARE:"DE","DISTRICT OF COLUMBIA":"DC","FEDERATED STATES OF MICRONESIA":"FM",FLORIDA:"FL",GEORGIA:"GA",GUAM:"GU",HAWAII:"HI",IDAHO:"ID",ILLINOIS:"IL",INDIANA:"IN",IOWA:"IA",KANSAS:"KS",KENTUCKY:"KY",LOUISIANA:"LA",MAINE:"ME","MARSHALL ISLANDS":"MH",MARYLAND:"MD",MASSACHUSETTS:"MA",MICHIGAN:"MI",MINNESOTA:"MN",MISSISSIPPI:"MS",MISSOURI:"MO",MONTANA:"MT",NEBRASKA:"NE",NEVADA:"NV","NEW HAMPSHIRE":"NH","NEW JERSEY":"NJ","NEW MEXICO":"NM","NEW YORK":"NY","NORTH CAROLINA":"NC","NORTH DAKOTA":"ND","NORTHERN MARIANA ISLANDS":"MP",OHIO:"OH",OKLAHOMA:"OK",OREGON:"OR",PALAU:"PW",PENNSYLVANIA:"PA","PUERTO RICO":"PR","RHODE ISLAND":"RI","SOUTH CAROLINA":"SC","SOUTH DAKOTA":"SD",TENNESSEE:"TN",TEXAS:"TX",UTAH:"UT",VERMONT:"VT","VIRGIN ISLANDS":"VI",VIRGINIA:"VA",WASHINGTON:"WA","WEST VIRGINIA":"WV",WISCONSIN:"WI",WYOMING:"WY","ARMED FORCES EUROPE, THE MIDDLE EAST, AND CANADA":"AE","ARMED FORCES CANADA":"AE","ARMED FORCES THE MIDDLE EAST":"AE","ARMED FORCES EUROPE":"AE","ARMED FORCES PACIFIC":"AP","ARMED FORCES AMERICAS (EXCEPT CANADA)":"AA","ARMED FORCES AMERICAS":"AA"};var n=["ALABAMA","ALASKA","AMERICAN SAMOA","ARIZONA","ARKANSAS","CALIFORNIA","COLORADO","CONNECTICUT","DELAWARE","DISTRICT OF COLUMBIA","FEDERATED STATES OF MICRONESIA","FLORIDA","GEORGIA","GUAM","HAWAII","IDAHO","ILLINOIS","INDIANA","IOWA","KANSAS","KENTUCKY","LOUISIANA","MAINE","MARSHALL ISLANDS","MARYLAND","MASSACHUSETTS","MICHIGAN","MINNESOTA","MISSISSIPPI","MISSOURI","MONTANA","NEBRASKA","NEVADA","NEW HAMPSHIRE","NEW JERSEY","NEW MEXICO","NEW YORK","NORTH CAROLINA","NORTH DAKOTA","NORTHERN MARIANA ISLANDS","OHIO","OKLAHOMA","OREGON","PALAU","PENNSYLVANIA","PUERTO RICO","RHODE ISLAND","SOUTH CAROLINA","SOUTH DAKOTA","TENNESSEE","TEXAS","UTAH","VERMONT","WEST VIRGINIA","VIRGINIA","VIRGIN ISLANDS","WASHINGTON","WISCONSIN","WYOMING","ARMED FORCES EUROPE, THE MIDDLE EAST, AND CANADA","ARMED FORCES CANADA","ARMED FORCES THE MIDDLE EAST","ARMED FORCES EUROPE","ARMED FORCES PACIFIC","ARMED FORCES AMERICAS (EXCEPT CANADA)","ARMED FORCES AMERICAS"];var r=["AL","AK","AS","AZ","AR","CA","CO","CT","DE","DC","FM","FL","GA","GU","HI","ID","IL","IN","IA","KS","KY","LA","ME","MH","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","MP","OH","OK","OR","PW","PA","PR","RI","SC","SD","TN","TX","UT","VT","VI","VA","WA","WV","WI","WY","AE","AP","AA"];function w(D){this.standard=function(){if(u(n,D.text.toUpperCase())){return k[D.text.toUpperCase()]}if(u(r,D.text.toUpperCase())){return D.text.toUpperCase()}return""};this.value=function(){return D.value?D.value:D.text}}function t(L,J,G){var M=this;var K;var F;var I={};var D=0;var E="accepted";var H=function(V,U,T,Q,N,O){if(!u(e,V)){return false}if(!K[V]){K[V]={}}U=U.replace(/<|>/g,"");var P=K[V].value!=U;K[V].undo=K[V].value||"";K[V].value=U;if(T&&K[V].dom){if(V==="state"&&D>0&&U in I){U=I[U].value()}f(K[V].dom).val(U)}var R={sourceEvent:N,field:V,address:M,value:U,suppressAutoVerification:O||false};if(P&&!Q){p.unmarkAsValid(M);var S=y.ui?f(".smarty-ui .smarty-tag.smarty-addr-"+F):undefined;if(M.isDomestic()){if(S&&!S.is(":visible")){S.show()}M.unaccept();o("AddressChanged",R)}else{if(S&&S.is(":visible")){S.hide()}M.accept({address:M},false)}}return true};this.form=J;this.verifyCount=0;this.lastField;this.active=true;this.lastStreetInput="";this.load=function(U,O){K={};F=O?O.replace(/[^a-z0-9_\-]/ig,""):A(1,99999);if(typeof U==="object"){this.lastField=U.lastline||U.zipcode||U.state||U.city||U.street;var S=true;for(var N in U){if(!u(e,N)){continue}var Q,P,V,W;try{Q=f(U[N]);V=Q.toArray();W=V?V.length==0:false}catch(T){W=true}if(W){P=U[N]||""}else{P=Q.val()||""}if(N==="state"&&V[0]!=undefined&&V[0].length!=undefined){f("option",Q).each(function(X){var Y=new w(this);var Z=Y.standard();I[Z]=Y;D++})}K[N]={};K[N].value=P;K[N].undo=P;S=S?P.length==0||p.isDropdown(U[N]):false;if(!W){if(y.debug){Q.css("background","#FFFFCC");Q.attr("placeholder",N+":"+F)}K[N].dom=U[N]}var R={address:this,field:N,value:P};!W&&f(U[N]).change(R,function(X){X.data.address.set(X.data.field,X.target.value,false,false,X,false)})}E="changed"}};this.load(L,G);this.set=function(Q,S,P,N,O,R){if(typeof Q==="string"&&arguments.length>=2){return H(Q,S,P,N,O,R)}else{if(typeof Q==="object"){var U=true;for(var T in Q){U=H(T,Q[T],P,N,O,R)?U:false}return U}}};this.replaceWith=function(Q,N,P){if(typeof Q==="array"&&Q.length>0){Q=Q[0]}if(M.isFreeform()){var O=(Q.addressee?Q.addressee+" ":"")+(Q.delivery_line_1?Q.delivery_line_1+" ":"")+(Q.delivery_line_2?Q.delivery_line_2+" ":"")+(Q.components.urbanization?Q.components.urbanization+" ":"")+(Q.last_line?Q.last_line:"");M.set("street",O,N,true,P,false)}else{if(Q.addressee){M.set("addressee",Q.addressee,N,true,P,false)}if(Q.delivery_line_1){M.set("street",Q.delivery_line_1,N,true,P,false)}if(Q.last_line&&K.lastline){M.set("lastline",Q.last_line,N,true,P,false)}M.set("street2",Q.delivery_line_2||"",N,true,P,false);M.set("secondary","",N,true,P,false);if(Q.components.urbanization){M.set("urbanization",Q.components.urbanization,N,true,P,false)}if(Q.components.city_name){M.set("city",Q.components.city_name,N,true,P,false)}if(Q.components.state_abbreviation){M.set("state",Q.components.state_abbreviation,N,true,P,false)}if(Q.components.zipcode&&Q.components.plus4_code){M.set("zipcode",Q.components.zipcode+"-"+Q.components.plus4_code,N,true,P,false)}}};this.corners=function(O){var N={};if(!O){for(var S in K){if(!K[S].dom||!f(K[S].dom).is(":visible")){continue}var R=K[S].dom;var Q=f(R).offset();Q.right=Q.left+f(R).outerWidth(false);Q.bottom=Q.top+f(R).outerHeight(false);N.top=!N.top?Q.top:Math.min(N.top,Q.top);N.left=!N.left?Q.left:Math.min(N.left,Q.left);N.right=!N.right?Q.right:Math.max(N.right,Q.right);N.bottom=!N.bottom?Q.bottom:Math.max(N.bottom,Q.bottom)}}else{var P=f(M.lastField);N=P.offset();N.right=N.left+P.outerWidth(false);N.bottom=N.top+P.outerHeight(false)}N.width=N.right-N.left;N.height=N.bottom-N.top;return N};this.verify=function(O,Q){if(!O&&!M.enoughInput()){if(y.debug){console.log("NOTICE: The address does not have enough input to verify. Since no callback is specified, there is nothing to do.")}return o("Completed",{address:M,invoke:O,invokeFn:Q,response:new b([])})}if(!M.enoughInput()){return o("AddressWasInvalid",{address:M,response:new b([]),invoke:O,invokeFn:Q})}p.disableFields(M);M.verifyCount++;var N=M.toRequest();var P=y.token?"auth-id="+encodeURIComponent(y.key)+"&auth-token="+encodeURIComponent(y.token):"auth-id="+encodeURIComponent(y.key);f.ajax({url:y.requestUrl+"?"+P+"&plugin="+encodeURIComponent(v.version)+(y.debug?"_debug":""),contentType:"jsonp",headers:{"X-Include-Invalid":y.xIncludeInvalid},data:N,timeout:y.timeout}).done(function(R,S,T){o("ResponseReceived",{address:M,response:new b(R),invoke:O,invokeFn:Q})}).fail(function(S,R){o("RequestTimedOut",{address:M,status:R,invoke:O,invokeFn:Q});M.verifyCount--});o("RequestSubmitted",{address:M})};this.enoughInput=function(){var N;if(K.state){N=K.state.value;if(K.state.dom!==undefined&&K.state.dom.length!==undefined){if(K.state.dom.selectedIndex<1){N=""}else{N=K.state.dom.options[K.state.dom.selectedIndex].text}}}return(K.street&&K.street.value)&&(((K.city&&K.city.value)&&(K.state&&N.length>0))||(K.zipcode&&K.zipcode.value)||(K.lastline&&K.lastline.value)||(!K.street2&&!K.city&&!K.state&&!K.zipcode&&!K.lastline))};this.toRequest=function(){var P={};if(K.hasOwnProperty("lastline")&&K.hasOwnProperty("city")&&K.hasOwnProperty("state")&&K.hasOwnProperty("zipcode")){delete K.city;delete K.state;delete K.zipcode}for(var O in K){var N={};if(O==="state"&&K[O].dom&&K[O].dom.length>0){N[O]=K[O].dom[K[O].dom.selectedIndex].text}else{N[O]=K[O].value.replace(/\r|\n/g," ")}f.extend(P,N)}return f.extend(P,{candidates:y.candidates})};this.toString=function(){if(K.state){var N=K.state.value;if(K.state.dom.length>0&&K.state.dom[K.state.dom.selectedIndex]!=null){N=K.state.dom[K.state.dom.selectedIndex].text}}return(K.street?K.street.value+" ":"")+(K.street2?K.street2.value+" ":"")+(K.secondary?K.secondary.value+" ":"")+(K.city?K.city.value+" ":"")+(K.state?N+" ":"")+(K.zipcode?K.zipcode.value:""+(K.lastline?K.lastline.value:""))};this.abort=function(O,N){N=typeof N==="undefined"?false:N;if(!N){M.unaccept()}delete M.form.processing;return s(O)};this.isFreeform=function(){return K.street&&!K.street2&&!K.secondary&&!K.addressee&&!K.city&&!K.state&&!K.zipcode&&!K.urbanization&&!K.lastline};this.get=function(N){return K[N]?K[N].value:null};this.undo=function(N){N=typeof N==="undefined"?true:N;for(var O in K){this.set(O,K[O].undo,N,false,undefined,true)}};this.accept=function(O,N){N=typeof N==="undefined"?true:N;E="accepted";p.enableFields(M);if(N){p.markAsValid(M)}o("AddressAccepted",O)};this.unaccept=function(){E="changed";p.unmarkAsValid(M);return M};this.getUndoValue=function(N){return K[N].undo};this.status=function(){return E};this.getDomFields=function(){var O={};for(var P in K){var N={};N[P]=K[P].dom;f.extend(O,N)}return O};this.hasDomFields=function(){for(var N in K){if(K[N].dom){return true}}};this.isDomestic=function(){if(!K.country){return true}var N=K.country.value.toUpperCase().replace(/\.|\s|\(|\)|\\|\/|-/g,"");var O=["","0","1","COUNTRY","NONE","US","USA","USOFA","USOFAMERICA","AMERICAN","UNITEDSTATES","UNITEDSTATESAMERICA","UNITEDSTATESOFAMERICA","AMERICA","840","223","AMERICAUNITEDSTATES","AMERICAUS","AMERICAUSA"];return u(O,N)||K.country.value=="-1"};this.autocompleteVisible=function(){return y.ui&&y.autocomplete&&f(".smarty-autocomplete.smarty-addr-"+M.id()).is(":visible")};this.id=function(){return F}}function h(D){this.addresses=[];this.dom=D;this.activeAddressesNotAccepted=function(){var F=[];for(var E=0;E<this.addresses.length;E++){var G=this.addresses[E];if(G.status()!="accepted"&&G.active){F.push(G)}}return F};this.allActiveAddressesAccepted=function(){return this.activeAddressesNotAccepted().length==0}}function b(D){var F=function(G){if(G>=D.length||G<0){if(D.length==0){throw new Error("Candidate index is out of bounds (no candidates returned; requested "+G+")")}else{throw new Error("Candidate index is out of bounds ("+D.length+" candidates; indicies 0 through "+(D.length-1)+" available; requested "+G+")")}}};var E=function(G){return typeof G==="undefined"?0:G};this.raw=D;this.length=D.length;this.isValid=function(){return this.length==1};this.isInvalid=function(){if(!y.xIncludeInvalid){return this.length==0}else{if(this.length==1&&this.raw[0].analysis.dpv_match_code){return this.raw[0].analysis.dpv_match_code=="N"}else{return true}}};this.isAmbiguous=function(){return this.length>1};this.isMissingSecondary=function(G){G=E(G);F(G);return this.raw[G].analysis.dpv_footnotes.indexOf("N1")>-1||this.raw[G].analysis.dpv_footnotes.indexOf("R1")>-1||(this.raw[G].analysis.footnotes&&this.raw[G].analysis.footnotes.indexOf("H#")>-1)};this.isBadSecondary=function(G){G=E(G);F(G);return this.raw[G].analysis.footnotes&&this.raw[G].analysis.footnotes.indexOf("S#")>-1};this.componentChanged=function(G){G=E(G);F(G);return this.raw[G].analysis.footnotes&&this.raw[G].analysis.footnotes.indexOf("L#")>-1};this.betterAddressExists=function(G){G=E(G);F(G);return this.raw[G].analysis.footnotes&&this.raw[G].analysis.footnotes.indexOf("P#")>-1};this.isExactMatch=function(G){G=E(G);F(G);return this.raw[G].analysis.footnotes&&this.raw[G].analysis.dpv_footnotes=="AABB"};this.isUniqueZipCode=function(G){G=E(G);F(G);return this.raw[G].analysis.dpv_footnotes.indexOf("U1")>-1||(this.raw[G].analysis.footnotes&&this.raw[G].analysis.footnotes.indexOf("Q#")>-1)};this.fixedAbbreviations=function(G){G=E(G);F(G);return this.raw[G].analysis.footnotes&&this.raw[G].analysis.footnotes.indexOf("N#")>-1};this.fixedZipCode=function(G){G=E(G);F(G);return this.raw[G].analysis.footnotes&&this.raw[G].analysis.footnotes.indexOf("A#")>-1};this.fixedSpelling=function(G){G=E(G);F(G);return this.raw[G].analysis.footnotes.indexOf("B#")>-1||(this.raw[G].analysis.footnotes&&this.raw[G].analysis.footnotes.indexOf("M#")>-1)};this.isBuildingDefault=function(G){G=E(G);F(G);return this.raw[G].metadata.building_default_indicator};this.isMilitary=function(G){G=E(G);F(G);return this.raw[G].analysis.dpv_footnotes.indexOf("F1")>-1};this.hasExtraSecondary=function(G){G=E(G);F(G);return this.raw[G].analysis.dpv_footnotes.indexOf("CC")>-1};this.isLacsLink=function(G){G=E(G);F(G);return this.raw[G].analysis.lacslink_code=="A"};this.isCommercial=function(G){G=E(G);F(G);return this.raw[G].metadata.rdi=="Commercial"};this.isResidential=function(G){G=E(G);F(G);return this.raw[G].metadata.rdi=="Residential"}}function a(E,F){var D=x[E.type];if(D){D(E,F)}}var l=function(D,E){if(D&&typeof D!=="function"&&E){if(E=="click"){setTimeout(function(){f(D).click()},5)}else{if(E=="submit"){f(D).submit()}}}};var x={FieldsMapped:function(D,E){if(y.debug){console.log("EVENT:","FieldsMapped","(Fields mapped to their respective addresses)",D,E)}i.loaded?p.postMappingOperations():f(i).load(p.postMappingOperations)},MapInitialized:function(D,E){if(y.debug){console.log("EVENT:","MapInitialized","(Mapped fields have been wired up to the window"+(y.ui?", document, and UI":" and document")+")",D,E)}},AutocompleteInvoked:function(D,E){if(y.debug){console.log("EVENT:","AutocompleteInvoked","(A request is about to be sent to the autocomplete service)",D,E)}p.requestAutocomplete(D,E)},AutocompleteReceived:function(D,E){if(y.debug){console.log("EVENT:","AutocompleteReceived","(A response has just been received from the autocomplete service)",D,E)}p.showAutocomplete(D,E)},AutocompleteUsed:function(D,E){if(y.debug){console.log("EVENT:","AutocompleteUsed","(A suggested address was used from the autocomplete service)",D,E)}},AddressChanged:function(D,E){if(y.debug){console.log("EVENT:","AddressChanged","(Address changed)",D,E)}if(y.autoVerify&&E.address.enoughInput()&&(E.address.verifyCount==0||E.address.isFreeform()||E.address.usedAutocomplete)&&!E.suppressAutoVerification&&E.address.hasDomFields()&&E.address.active&&!E.address.autocompleteVisible()&&(E.address.form&&!E.address.form.processing)){o("VerificationInvoked",{address:E.address})}E.address.usedAutocomplete=false},VerificationInvoked:function(D,E){if(y.debug){console.log("EVENT:","VerificationInvoked","(Address verification invoked)",D,E)}if(!E.address||(E.address&&E.address.form&&E.address.form.processing)){if(y.debug){console.log("NOTICE: VerificationInvoked event handling aborted. Address is missing or an address in the same form is already processing.")}return}else{if(E.address.status()=="accepted"&&!E.verifyAccepted){if(y.debug){console.log("NOTICE: VerificationInvoked raised on an accepted or un-changed address. Nothing to do.")}return o("Completed",E)}else{if(E.address.form){E.address.form.processing=true}}}E.address.verify(E.invoke,E.invokeFn)},RequestSubmitted:function(D,E){if(y.debug){console.log("EVENT:","RequestSubmitted","(Request submitted to server)",D,E)}p.showLoader(E.address)},ResponseReceived:function(D,E){if(y.debug){console.log("EVENT:","ResponseReceived","(Response received from server, but has not been inspected)",D,E)}p.hideLoader(E.address);if(typeof E.invoke==="function"){E.invoke(E.response)}if(E.response.isInvalid()){o("AddressWasInvalid",E)}else{if(y.verifySecondary&&E.response.isMissingSecondary()){o("AddressWasMissingSecondary",E)}else{if(E.response.isValid()){o("AddressWasValid",E)}else{o("AddressWasAmbiguous",E)}}}},RequestTimedOut:function(D,E){if(y.debug){console.log("EVENT:","RequestTimedOut","(Request timed out)",D,E)}if(E.address.form){delete E.address.form.processing}if(E.invoke){E.address.accept(E,false)}p.enableFields(E.address);p.hideLoader(E.address)},AddressWasValid:function(D,E){if(y.debug){console.log("EVENT:","AddressWasValid","(Response indicates input address was valid)",D,E)}var G=E.address;var F=E.response;E.response.chosen=F.raw[0];G.replaceWith(F.raw[0],true,D);G.accept(E)},AddressWasAmbiguous:function(D,E){if(y.debug){console.log("EVENT:","AddressWasAmbiguous","(Response indiciates input address was ambiguous)",D,E)}p.showAmbiguous(E)},AddressWasInvalid:function(D,E){if(y.debug){console.log("EVENT:","AddressWasInvalid","(Response indicates input address was invalid)",D,E)}p.showInvalid(E)},AddressWasMissingSecondary:function(D,E){if(y.debug){console.log("EVENT:","AddressWasMissingSecondary","(Response indicates input address was missing secondary",D,E)}p.showMissingSecondary(E)},OriginalInputSelected:function(D,E){if(y.debug){console.log("EVENT:","OriginalInputSelected","(User chose to use original input)",D,E)}E.address.accept(E,false)},UsedSuggestedAddress:function(D,E){if(y.debug){console.log("EVENT:","UsedSuggestedAddress","(User chose to a suggested address)",D,E)}E.response.chosen=E.chosenCandidate;E.address.replaceWith(E.chosenCandidate,true,D);E.address.accept(E)},InvalidAddressRejected:function(D,E){if(y.debug){console.log("EVENT:","InvalidAddressRejected","(User chose to correct an invalid address)",D,E)}if(E.address.form){delete E.address.form.processing}o("Completed",E)},AddressAccepted:function(D,E){if(y.debug){console.log("EVENT:","AddressAccepted","(Address marked accepted)",D,E)}if(!E){E={}}if(E.address&&E.address.form){delete E.address.form.processing}if(E.invoke&&E.invokeFn){l(E.invoke,E.invokeFn)}o("Completed",E)},Completed:function(D,E){if(y.debug){console.log("EVENT:","Completed","(All done)",D,E)}if(E.address){p.enableFields(E.address);if(E.address.form){delete E.address.form.processing}}}};function u(F,E){for(var D in F){if(F[D]===E){return true}}return false}function A(E,D){return Math.floor(Math.random()*(D-E+1))+E}function g(D){return D?D.toLowerCase().replace("[]",""):""}function o(E,D){f(q).triggerHandler(E,D)}function B(D){f(q).bind(D,a)}function s(D){if(!D){return false}if(D.preventDefault){D.preventDefault()}if(D.stopPropagation){D.stopPropagation()}if(D.stopImmediatePropagation){D.stopImmediatePropagation()}D.cancelBubble=true;return false}})(jQuery,window,document);