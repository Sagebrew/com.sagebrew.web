{% extends "layout/hero-three-col.html" %}
{% load staticfiles %}
{% block title %}{{ page_user.first_name }} {{ page_user.last_name }}{% endblock title %}
{% block hero %}
    <div class="row">
        <div class="col-md-12 wallpaper-wrapper">
            <div class="thumbnail sb_profile_pic">
                {% static 'images/sage_coffee_grey-01.png' as default_profile %}
                {% if request.user.username == page_user.username %}
                    <div class="hidden-xs" id="cropProfilePageEyecandy">
                        <img id="profile_pic" src="{{ page_profile.profile_pic|default_if_none:default_profile }}">
                    </div>
                    <div class="hidden-sm hidden-md hidden-lg">
                        <img src="{{ page_profile.profile_pic|default_if_none:default_profile }}">
                    </div>
                {% else %}
                    <img id="profile_pic" src="{{ page_profile.profile_pic|default_if_none:default_profile }}">
                {% endif %}
            </div>
            <div>
                {% static 'images/wallpaper_western.jpg' as default_wallpaper %}
                {% if request.user.username == page_user.username %}
                    <div class="hidden-xs" id="cropWallpaperPictureEyecandy">
                        <img id="wallpaper_pic" class="wallpaper_profile"
                             src="{{ page_profile.wallpaper_pic|default_if_none:default_wallpaper }}">
                    </div>
                    <div class="hidden-sm hidden-md hidden-lg">
                        <img class="wallpaper_profile"
                             src="{{ page_profile.wallpaper_pic|default_if_none:default_wallpaper }}">
                    </div>
                {% else %}
                    <img id="wallpaper_pic" class="wallpaper_profile"
                         src="{{ page_profile.wallpaper_pic|default_if_none:default_wallpaper }}">
                    {% comment %} A hack to get non-friend pages to load correctly{% endcomment %}
                {% endif %}
            </div>
        </div>
    </div>
    <div class="block"></div>
{% endblock hero %}
{% block sidebar_left %}
    <div class="block">
        <h6 class="block-title no-underline center-title">Missions</h6>
    </div>
    <div id="js-mission-list">
        <div id="js-mission-container"></div>
        <div class="loader"></div>
    </div>

    <div class="block">
        <h6 class="block-title no-underline center-title">Endorsements</h6>
    </div>
    <div id="js-endorsements-list">
        <div id="js-endorsements-container"></div>
        <div class="loader"></div>
    </div>
{% endblock sidebar_left %}
{% block sidebar_right %}
    <div class="block">
        <h6 class="block-title no-underline center-title">Network</h6>
    </div>
    {% if not is_owner %}
        <div class="block">
            <h6 class="block-title no-underline center-title" style="padding-bottom: 0;">Add to Network</h6>
            <div class="block-content" style="padding-top: 0;">
                <small>Stay Updated On Public Contributions and Posts</small>
            </div>
            <div class="block-content" style="padding-top: 0;">
                {% if page_profile.is_following %}
                    <a class="btn btn-primary sb_btn sb_btn_fill js-unfollow" href="#"><i class="fa fa fa-minus quest-rocket"></i> Unfollow</a>
                {% else %}
                    <a class="btn btn-primary sb_btn sb_btn_fill js-follow" href="#"><i class="fa fa fa-plus quest-rocket"></i> Follow</a>
                {% endif %}
            </div>
        </div>
    {% endif %}

    <div class="block">
        <h6 class="block-title">Followers</h6>
        <div class="block-content" id="js-follower-list"></div>
    </div>
    <div class="block">
        <h6 class="block-title">Following</h6>
        <div class="block-content" id="js-following-list"></div>
    </div>
    {% if is_owner %}
        <div class="block block-type-nav">
            <div class="block-title">
                Start a Mission
            </div>
            <div class="block-content">
                <a class="btn btn-primary sb_btn sb_btn_fill js-quest-signup" href="#"><i class="fa fa-rocket quest-rocket"></i> Embark</a>
            </div>
        </div>
        <div class="block block-type-nav">
            <div class="block-title">
                Start a Conversation
            </div>
            <div class="block-content">
                <a class="btn btn-primary sb_btn sb_btn_fill" href="/conversations/submit_question/"><i class="fa fa-cloud  quest-rocket"></i> Discuss</a>
            </div>
        </div>
    {% endif %}
{% endblock sidebar_right %}
{% block live %}
    <div class="block">
        <h6 class="block-title no-underline center-title">Recent Public Contributions</h6>
    </div>
    <div id="js-recent-contributions">
        <div class="loader"></div>
    </div>

    {% include "flag_modal.html" %}
{% endblock live %}


{% block scripts %}
    {{ block.super }}
    <script src="{% static 'js/profile_pic_croppic.js' %}"></script>
    <script src="{% static 'js/wallpaper_pic_croppic.js' %}"></script>

{% endblock scripts %}
{% block intercom %}
    Intercom('trackEvent', 'visited-profile-page');
{% endblock %}
