{% comment %}
    This template is rendered into html through a view and then returned as a
    result to an endpoint that is called requesting existing posts and their
    comments. This template is not meant for normal inclusion in a initial
    render template.
{% endcomment %}
<div class="sb_id" data-object_uuid="{{ object_uuid }}"style="display: None"></div>
<div class="sb_post_header">
    <div class="row">
        <div class="col-lg-1 col-md-1 col-sm-1 hidden-xs">
            <div class="sb_thumbnail_xs thumbnail">
                <img src="{{ profile_pic|default_if_none:'' }}"/>
            </div>
        </div>
        <div class="col-lg-5 col-md-5 col-sm-4 col-xs-7">
           <div class="sb_post_header_info" style="margin-top: -8px;">
               <div class="row-fluid" style="margin-bottom: -10px;">
                   <a href="{% url 'profile_page' parent_object %}">
                       {{ post_owner }}
                   </a>
               </div>
               <div class="row-fluid">
                    <small>{{ last_edited_on|date:"D d M Y" }}</small>
                    {% comment %}
                        date/time/location(or disctrict)
                    {%  endcomment %}
               </div>
           </div>
        </div>
        <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-lg-offset-4">
            <button class="btn dropdown-toggle sb_btn_icon" type="button"
                    data-toggle="dropdown">
                <span class="sb_dropdown_icon fui-gear"></span>
            </button>
            <ul class="dropdown-menu dropdown-menu-right sb_post_dropdown"
                role="menu" aria-labelledby="dropdown-menu">
                {% if parent_object == user.username %}
                    <li role="presentation"><a class="sb_post_dropdown_menu show_edit_post_class"
                                               data-uuid="{{ object_uuid }}"
                                               type="submit">Edit Post</a>
                    </li>
                    <li role="presentation" class="sb_divider"></li>

                    <li role="presentation"> <a class='sb_post_dropdown_menu delete_object-action'
                                               data-current_pleb="{{ current_user }}"
                                               data-object_uuid="{{ object_uuid }}"
                                               data-object_type="01bb301a-644f-11e4-9ad9-080027242395">Delete Post</a>
                    </li>
                {% else %}
                    <li role="presentation"><a class='sb_post_dropdown_menu flag_object-action'
                                               data-flag_reason='spam'
                                               data-current_user="{{ current_user }}"
                                               data-object_uuid="{{ object_uuid }}"
                                               data-object_type="01bb301a-644f-11e4-9ad9-080027242395">Flag as Spam
                                               </a>
                    </li>
                    <li role="presentation" class="sb_divider"></li>
                    <li role="presentation"><a class='sb_post_dropdown_menu flag_object-action'
                                               data-flag_reason='explicit'
                                               data-current_user="{{ current_user }}"
                                               data-object_uuid="{{ object_uuid }}"
                                               data-object_type="01bb301a-644f-11e4-9ad9-080027242395">Flag as Explicit
                                               </a>
                    </li>
                    <li role="presentation" class="sb_divider"></li>
                    <li role="presentation"><a class='sb_post_dropdown_menu flag_object-action'
                                               data-flag_reason='other'
                                               data-current_user="{{ current_user }}"
                                               data-object_uuid="{{ object_uuid }}"
                                               data-object_type="01bb301a-644f-11e4-9ad9-080027242395">Flag as Other
                                               </a>
                    </li>
                {% endif %}
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-1 col-md-1 col-sm-1 hidden-xs sb_vote_wrapper">
            <div style="display: none" class="sb_upvote_count{{ object_uuid }}">
                {{ up_vote_number }}
            </div>
            <div class="row sb_up_vote_wrapper">
                <a class="btn sb_btn_question_vote_up vote_object-action"
                   data-object_uuid="{{ object_uuid }}"
                   data-current_pleb="{{ current_pleb }}"
                   data-vote_type=true
                   data-object_type="02241aee-644f-11e4-9ad9-080027242395">
                    <span class="sb_question_vote_icon fui-triangle-up"></span>
                </a>
            </div>
            <div class="row vote_count">
                <p>
                    453
                </p>
            </div>
            <div class="row sb_down_vote_wrapper">
                <a class="btn sb_btn_question_vote_down vote_object-action"
                   data-object_uuid="{{ object_uuid }}"
                   data-current_pleb="{{ current_pleb }}"
                   data-vote_type=false
                   data-object_type="02241aee-644f-11e4-9ad9-080027242395">
                    <span class="sb_question_vote_icon fui-triangle-down"></span>
                </a>
            </div>
            <div style="display: none" class="sb_downvote_count{{ object_uuid }}">{{ down_vote_number }}</div>
        </div>
        <div class="col-lg-10 col-md-10 col-sm-10 col-xs-12 sb_post_wrapper">
            <div class="sb_post_body" id="sb_content_{{ object_uuid }}">
                {{ content|linebreaksbr }}
            </div>
        </div>
    </div>

    {% include "sb_comments.html" %}
    {% comment %}
        This area is for inputing a new comment. The include is needed for population of existing comments.
    {% endcomment %}
    <div class="row">
        <div class="input-group sb_comment">
            <textarea class="input-group form-control sb_comment_input "
                      id="post_comment_on_{{ object_uuid }}"
                      rows="2"
                      placeholder="Write your comment..."></textarea>
            <a class="btn input-group-btn sb_btn_comment_icon comment-action"
               data-object_uuid="{{ object_uuid }}"
               data-current_pleb="{{ current_user }}"
               data-object_type="01bb301a-644f-11e4-9ad9-080027242395"><span class="fui-new"></span></a>
        </div>
        <div id="divid_{{ object_uuid }}"
             style="display: none">
            <textarea class="form-control edit_post_input_class"
                      id="{{ object_uuid }}"
                      name="edit_post_input"
                      rows="1"
                      placeholder="Edit your post..."></textarea>
            <a class='btn btn-primary edit_object-action'
               id="edit_post_button_id"
               data-object_type="01bb301a-644f-11e4-9ad9-080027242395"
               data-parent_object="{{ parent_object }}"
               data-object_uuid="{{ object_uuid }}"
               data-datetime="{{ datetime }}">Submit</a>
        </div>
    </div>
</div>