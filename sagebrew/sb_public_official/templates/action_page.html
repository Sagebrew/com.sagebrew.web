{% extends "base.html" %}
{% load staticfiles %}
{% block css %}
    {{ block.super }}
    <link href="{% static 'css/vendor/croppic.css' %}" rel="stylesheet" type="text/css"/>
{% endblock css %}
{% block title %}
    {% if "updates" not in request.path %}
        {{ first_name }} {{ last_name }}'s Quest
    {% elif "updates" in request.path %}
        {{ first_name }} {{ last_name }}'s Quest Updates
    {% endif %}
{% endblock title %}
{% block description %}
    {% if "updates" not in request.path %}
        <meta name="description" content="{{ description }}">
    {% elif "updates" in request.path %}
        <meta name="description" content="Find all the latest updates on
        events, campaign information, and more from {{ first_name }} {{ last_name }}'s Quest.">
    {% endif %}
{% endblock description %}
{% block keywords %}
    {% if keywords %}
        <meta name="keywords" content="{{ keywords }}">
    {% endif %}
    <meta name="author" content="{{ first_name }} {{ last_name }}">
{% endblock keywords %}
{% block content %}
<div id="campaign_id" style="display: none" data-object_uuid="{{ id }}"></div>
<div id="stripe-publishable" data-stripe_key="{{ stripe_key }}"></div>
<div class="row-fluid sb_page">
    {% if active == True %}
        {% include "action_channel.html" %}
    {% else %}
        {% include "action_channel_disabled.html" %}
    {% endif %}
{% include "action_nav.html" %}
<div class="row sb_wall sb_action_wall">
    {% if "moderators" not in request.path %}
    <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
    {% else %}
    <div class="col-xs-12">
    {% endif %}
        {% if "updates" not in request.path and "statistics" not in request.path and "moderators" not in request.path %}
            {% if active == True %}
                {% include "saga.html" %}
            {% else %}
                {% include "saga_disabled.html" %}
            {% endif %}
        {% elif "updates" in request.path %}
            {% if active == True %}
                {% include "updates.html" %}
            {% else %}
                {% include "updates_disabled.html" %}
            {% endif %}
        {% elif "statistics" in request.path %}
            {% include "quest_insight.html" %}
        {% elif "moderators" in request.path %}
            {% include 'add_campaign_helpers.html' %}
        {% endif %}
    </div>
    {% if "moderators" not in request.path %}
    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
        <h5>Goals{% if is_editor or is_accountant %}<button class="btn btn-primary sb_btn_icon sb_btn_icon_green" id="manage_goals" style="margin-top: -5px;"><span class="fa fa-edit"></span></button>{% endif %}</h5>
        {% if active == True %}
            <div id="active_round" data-object_uuid="{{ active_round }}"></div>
            <div id="goal_wrapper" class="block sb_channel_block"></div>
        {% elif request.user.username == id %}
            <div id="active_round" data-object_uuid="{{ upcoming_round }}"></div>
            <div id="goal_wrapper" class="block sb_channel_block"></div>
        {% else %}
            {% include "goals_block_disabled.html" %}
        {% endif %}
    </div>
    {% endif %}
</div>
</div>
{% endblock %}
{% block footer %}
{% endblock %}
{% block scripts %}
    {{ block.super }}
    <script type="text/javascript" src="https://js.stripe.com/v2/"></script>
    <script type="text/javascript" src="https://checkout.stripe.com/checkout.js"></script>
    {% if request.user.is_anonymous or not request_profile.is_verified %}
        <script src="{% static 'js/activate_tooltips.js' %}"></script>
    {% endif %}
    {% if active or request.user.username == id %}
        {% if "moderators" not in request.path %}
            <script src="{% static 'js/get_goals.js' %}"></script>
        {% endif %}
        <script src="{% static 'js/get_updates.js' %}"></script>
        <script src="{% static 'js/create_donations.js' %}"></script>
        <script src="{% static 'js/donation_validator.js' %}"></script>
        {% if allow_vote %}
            <script src="{% static 'js/pledge_vote.js' %}"></script>
        {% else %}
            <script src="{% static 'js/activate_tooltips.js' %}"></script>
        {% endif %}
    {% endif %}
    {% if is_accountant and "statistics" in request.path %}
        <script src="{% static 'js/vendor/highcharts.js' %}"></script>
        <script src="{% static 'js/get_charts.js' %}"></script>
        <script src="{% static 'js/get_donation_csv.js' %}"></script>
    {% endif %}
    {% if is_editor or is_accountant %}
        <script src="{% static 'js/croppic.min.js' %}"></script>
        <script src="{% static 'js/uuid.js' %}"></script>
        <script src="{% static 'js/edit_quest.js' %}"></script>
        <script src="{% static 'js/quest_profile_pic.js' %}"></script>
        <script src="{% static 'js/quest_wallpaper_pic.js' %}"></script>
    {% endif %}
    {% if request.user.username == id %}
        {% if "moderators" in request.path %}
            <script src="{% static 'js/get_possible_helpers.js' %}"></script>
        {% endif %}
        {% if "updates" not in request.path and "statistics" not in request.path and "moderators" not in request.path %}
            <script src="{% static 'js/event_quest_intercom.js' %}"></script>
        {% endif %}
    {% else %}
        {% if not request.user.is_anonymous %}
            <script src="{% static 'js/event_visit_quest_intercom.js' %}"></script>
        {% endif %}
    {% endif %}
{% endblock scripts %}