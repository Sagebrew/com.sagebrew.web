{% extends "base.html" %}
{% load i18n %}
{% load staticfiles %}
{% block css %}
    {{ block.super }}
    <link href="{% static 'css/vendor/select2.css' %}" rel="stylesheet"/>
    <link rel="stylesheet" href="{% static 'css/vendor/jquery.pagedown-bootstrap.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/vendor/bootstrap-tokenfield.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/vendor/tokenfield-typeahead.min.css' %}"/>

{% endblock css %}

{% block content %}

<div id="fileModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn btn-sm sb_btn close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                <h3 id="fileModalLabel">Upload Images</h3>
            </div>
            <div class="modal-form">
                <div class="tabbable tabs-left">
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="#tab1" data-toggle="tab">Upload</a></li>
                        <li><a href="#tab2" data-toggle="tab">Enter URL</a></li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab1">
                            <div class="preview" id="preview" >
                                <input id="upload_image" type="file" name="img">
                            </div>
                        </div>
                        <div class="tab-pane" id="tab2">
                            <p><input type="text" class="img-url" placeholder="Ex: http://yoursite.com/image.jpg" id="img-url" /></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-sm sb_btn" data-dismiss="modal" aria-hidden="true">Close</button>
                <button class="btn btn-sm sb_btn" id="insert_image_post">Insert Image</button>
            </div>
        </div>
    </div>
</div>
    <div class="action" style="display: none" data-action="write_question"></div>
    <div class="action" style="display: none" data-action="write_comment"></div>
    <div class="action" style="display: none" data-action="write_solution"></div>
    <div class="row-fluid sb_page">
        <div class="col-lg-9">
            <div class="sb_wall sb_conversation_wall">
                <div>
                   <h3>Conversations</h3>
                </div>
                <div class="sb_border sb_markdown">
                    <h3>{% if not edit %}Submit Question{% else %} Edit Question{% endif %}</h3>
                    <form id="questionInputForm">
                        <div class="title_input">
                            {% if edit %}
                            <input class="form-control title_input" style="margin-bottom: 10px;"
                                      id="title_id"
                                      name="title"
                                      placeholder="Question Title"
                                      value="{{ title }}" disabled="disabled"/>
                            {% else %}
                                <input class="form-control" style="margin-bottom: 10px;"
                                      id="title_id"
                                      name="title"
                                      placeholder="Question Title"
                                      value="{{ title }}"/>
                            {% endif %}
                        </div>
                        <div class="question_content_input">
                            <textarea class="form-control"
                                      id="question_content_id"
                                      name="question_content"
                                      cols="20"
                                      rows="8"
                                      placeholder="Question Context">{{ content }}</textarea>
                        </div>
                        {% if not edit %}
                        <div class="row">
                            <div class="col-lg-12">
                                {% include "tag_box.html" %}
                            </div>
                        </div>
                        {% endif %}
                        {% comment %}
                        TODO determine if this and other "buttons" need to be a tags
                        instead of buttons
                        {% endcomment %}
                        <div class="row">
                            <div class="col-lg-3 col-md-4">
                                {% if not edit %}
                                <button class="btn btn-primary sb_btn sb_btn_fill submit_question-action"
                                       data-url="/v1/questions/">Create Question</button>
                                {% else %}
                                <button class="btn btn-primary sb_btn sb_btn_fill submit_edit-action"
                                        data-object_uuid="{{ object_uuid }}">Edit Question</button>
                                {% endif %}
                            </div>
                            <div class="col-lg-3 col-md-4">
                                <button class="btn btn-primary sb_btn sb_btn_fill cancel_question-action">Cancel</button>

                            </div>
                        </div>
                    </form>
                </div>
             </div>
        </div>
    </div>
{% include "side_content.html" %}



{% endblock %}



{% block scripts %}
    {{ block.super }}
    <script src="{% static 'js/vendor/jquery.pagedown-bootstrap.combined.min.js' %}"></script>
    <script src="{% static 'js/vendor/bootstrap-tokenfield.min.js' %}"></script>
    <script src="{% static 'js/vendor/typeahead.js' %}"></script>
    <script src="{% static 'js/create_markdown.js' %}"></script>
    <script src="{% static 'js/save_question.js' %}"></script>

    <script src="{% static 'js/get_tags.js' %}"></script>
    <script src="{% static 'js/question_validator.js' %}"></script>
    {% if edit %}
        <script src="{% static 'js/populate_edit_question.js' %}"></script>
        <script src="{% static 'js/edit_question.js' %}"></script>
    {% else %}
        <script src="{% static 'js/comment_validator.js' %}"></script>
    {% endif %}
{% endblock scripts %}